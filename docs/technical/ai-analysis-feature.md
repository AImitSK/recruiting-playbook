# KI-Analyse Feature

## Ãœbersicht

Das **Killer-Feature** des Plugins: KI-gestÃ¼tzte Bewerber-Analyse fÃ¼r intelligentes Job-Matching.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      KI-ANALYSE SYSTEM                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚                     BEWERBER UPLOAD                             â”‚
â”‚                          â”‚                                      â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚        â”‚                 â”‚                 â”‚                    â”‚
â”‚        â–¼                 â–¼                 â–¼                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  MODUS  â”‚      â”‚  MODUS  â”‚      â”‚  MODUS  â”‚               â”‚
â”‚   â”‚    A    â”‚      â”‚    B    â”‚      â”‚    C    â”‚               â”‚
â”‚   â”‚         â”‚      â”‚         â”‚      â”‚         â”‚               â”‚
â”‚   â”‚  Job-   â”‚      â”‚  Job-   â”‚      â”‚ Chancen â”‚               â”‚
â”‚   â”‚  Match  â”‚      â”‚ Finder  â”‚      â”‚  Check  â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚        â”‚                 â”‚                 â”‚                    â”‚
â”‚        â–¼                 â–¼                 â–¼                    â”‚
â”‚   "Passe ich      "Welche Jobs      "Wie stehen               â”‚
â”‚    zu diesem       passen zu         meine                     â”‚
â”‚    Job?"           mir?"             Chancen?"                  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Die drei KI-Modi

| Modus | Name | Frage | Wo verfÃ¼gbar |
|-------|------|-------|--------------|
| **A** | Job-Match | "Passe ich zu diesem Job?" | Stellen-Einzelseite |
| **B** | Job-Finder | "Welche Jobs passen zu mir?" | Karriere-Seite, Widget |
| **C** | Chancen-Check | "Wie stehen meine Chancen?" | Nach Upload, vor Bewerbung |

---

## Modus A: Job-Match

> "Passe ich zu diesem Job?"

Der Bewerber ist auf einer **konkreten Stellenanzeige** und mÃ¶chte wissen, ob er/sie qualifiziert ist.

### User Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               STELLEN-EINZELSEITE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  # Fachkrankenpfleger Intensiv (m/w/d)                         â”‚
â”‚  ğŸ“ Bielefeld | â° Vollzeit | ğŸ’° ab 35â‚¬/Std                    â”‚
â”‚                                                                 â”‚
â”‚  [Beschreibung...]                                              â”‚
â”‚                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ¤– KI-QUALIFIKATIONSCHECK                              â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Finden Sie in Sekunden heraus, ob diese Stelle         â”‚   â”‚
â”‚  â”‚  zu Ihnen passt!                                         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸ“„ Lebenslauf hochladen (PDF, DOC)                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚         Dateien hier ablegen                    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚              oder klicken                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                  â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Optional: Zeugnisse, Zertifikate                       â”‚   â”‚
â”‚  â”‚  [+ Weitere Datei]                                       â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [âœ“] Ich stimme der einmaligen Analyse zu               â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [ğŸ” QUALIFIKATION PRÃœFEN]                              â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ergebnis

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JOB-MATCH ERGEBNIS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚                         â”‚                       â”‚
â”‚              â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘    â”‚                       â”‚
â”‚              â”‚                         â”‚                       â”‚
â”‚              â”‚         82%             â”‚                       â”‚
â”‚              â”‚                         â”‚                       â”‚
â”‚              â”‚     MATCH-SCORE         â”‚                       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                 â”‚
â”‚   Sie sind gut qualifiziert fÃ¼r diese Position!                â”‚
â”‚                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚   âœ… ErfÃ¼llte Anforderungen:                                   â”‚
â”‚                                                                 â”‚
â”‚   â€¢ Examinierte Pflegekraft âœ“                                  â”‚
â”‚   â€¢ Berufserfahrung: 8 Jahre (gefordert: 3+) âœ“                â”‚
â”‚   â€¢ Fachweiterbildung Intensivpflege âœ“                        â”‚
â”‚   â€¢ Schichtbereitschaft âœ“                                      â”‚
â”‚                                                                 â”‚
â”‚   âš ï¸ Teilweise erfÃ¼llt:                                        â”‚
â”‚                                                                 â”‚
â”‚   â€¢ Erfahrung mit Beatmungspatienten                           â”‚
â”‚     â†’ In Ihren Unterlagen nicht eindeutig erkennbar            â”‚
â”‚                                                                 â”‚
â”‚   âŒ Fehlend:                                                   â”‚
â”‚                                                                 â”‚
â”‚   â€¢ FÃ¼hrungserfahrung                                          â”‚
â”‚     â†’ Optional, aber von Vorteil                               â”‚
â”‚                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚   ğŸ’¡ Empfehlung:                                               â”‚
â”‚   Bewerben Sie sich! Ihre Qualifikation passt sehr gut.        â”‚
â”‚   ErwÃ¤hnen Sie im Anschreiben Ihre Intensivpflege-Erfahrung.  â”‚
â”‚                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚   [JETZT BEWERBEN - Daten werden Ã¼bernommen]                   â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ ğŸ“‹ Erkannte Daten (vorausgefÃ¼llt):                      â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚ Name: Max Mustermann                                     â”‚  â”‚
â”‚   â”‚ E-Mail: m.mustermann@email.de                           â”‚  â”‚
â”‚   â”‚ Telefon: 0170 1234567                                    â”‚  â”‚
â”‚   â”‚ Beruf: Fachkrankenpfleger Intensivpflege               â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚ [Daten bearbeiten]                                       â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Modus B: Job-Finder

> "Welche Jobs passen zu mir?"

Der Bewerber ist auf der **Karriere-Ãœbersichtsseite** oder nutzt ein Widget und mÃ¶chte passende Stellen finden.

### User Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KARRIERE-SEITE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  # Karriere bei Samaritano                                     â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  ğŸ¤– KI-JOB-FINDER                                       â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Laden Sie Ihren Lebenslauf hoch und wir finden        â”‚   â”‚
â”‚  â”‚  die perfekten Stellen fÃ¼r Sie!                         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚         ğŸ“„ Lebenslauf hochladen                 â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [ğŸ” PASSENDE STELLEN FINDEN]                           â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ODER MANUELL SUCHEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                                                 â”‚
â”‚  [Alle Stellenangebote anzeigen]                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ergebnis

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   JOB-FINDER ERGEBNIS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ‘¤ Erkanntes Profil:                                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Max Mustermann                                          â”‚   â”‚
â”‚  â”‚  ğŸ“ Examinierter Altenpfleger                           â”‚   â”‚
â”‚  â”‚  ğŸ“… 12 Jahre Berufserfahrung                            â”‚   â”‚
â”‚  â”‚  â­ Zusatzqualifikation: Intensivpflege, Wundmanagement â”‚   â”‚
â”‚  â”‚  ğŸ“ Wohnort: Minden                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¯ TOP-MATCHES FÃœR SIE (5 von 12 Stellen):                   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 98%   Fachkrankenpfleger Intensiv (m/w/d)  â”‚   â”‚
â”‚  â”‚                    ğŸ“ Bielefeld | ğŸ’° 35â‚¬/Std            â”‚   â”‚
â”‚  â”‚                    â° Vollzeit, Teilzeit                 â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Warum dieser Match:                                     â”‚   â”‚
â”‚  â”‚  â€¢ Ihre Intensivpflege-Weiterbildung passt perfekt      â”‚   â”‚
â”‚  â”‚  â€¢ Ihre Erfahrung Ã¼bertrifft die Anforderungen          â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [DETAILS ANSEHEN]  [DIREKT BEWERBEN]                   â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 92%   Altenpfleger (m/w/d)                  â”‚   â”‚
â”‚  â”‚                    ğŸ“ Hannover | ğŸ’° 32â‚¬/Std             â”‚   â”‚
â”‚  â”‚                    â° Vollzeit, Teilzeit, Minijob        â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  Warum dieser Match:                                     â”‚   â”‚
â”‚  â”‚  â€¢ Exakt Ihr Ausbildungsberuf                           â”‚   â”‚
â”‚  â”‚  â€¢ Wundmanagement-Zertifikat ist ein Plus              â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [DETAILS ANSEHEN]  [DIREKT BEWERBEN]                   â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 85%   Pflegefachkraft Nachtdienst          â”‚   â”‚
â”‚  â”‚                    ğŸ“ Minden | ğŸ’° 30â‚¬/Std + Zulagen     â”‚   â”‚
â”‚  â”‚                    â° Teilzeit                           â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  [DETAILS ANSEHEN]  [DIREKT BEWERBEN]                   â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  [Weitere Matches anzeigen (2)]                                â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“§ Keine passende Stelle dabei?                               â”‚
â”‚  [Im Talent-Pool registrieren - Wir melden uns!]              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Modus C: Chancen-Check

> "Wie stehen meine Chancen?"

Nach dem Upload (in Modus A oder B) kann der Bewerber eine **tiefere Analyse** seiner Einstellungschancen anfordern.

### Ergebnis

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHANCEN-CHECK                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚         Ihre Einstellungschancen fÃ¼r diese Stelle:             â”‚
â”‚                                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚             â”‚                             â”‚
â”‚                    â”‚     87%     â”‚                             â”‚
â”‚                    â”‚             â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                    SEHR GUT! ğŸ‰                                â”‚
â”‚                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š DETAILANALYSE                                              â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                 â”‚
â”‚  âœ… Das spricht FÃœR Sie (Score: +45):                         â”‚
â”‚                                                                 â”‚
â”‚  â”‚ Fachliche Qualifikation          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ +20     â”‚
â”‚  â”‚ â€¢ Examinierte Pflegekraft (Pflicht erfÃ¼llt)               â”‚
â”‚  â”‚ â€¢ Fachweiterbildung Intensivpflege (Bonus!)               â”‚
â”‚  â”‚                                                            â”‚
â”‚  â”‚ Berufserfahrung                  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ +15     â”‚
â”‚  â”‚ â€¢ 12 Jahre (gefordert: 3 Jahre)                           â”‚
â”‚  â”‚ â€¢ Erfahrung in vergleichbarer Position                    â”‚
â”‚  â”‚                                                            â”‚
â”‚  â”‚ Soft Skills (aus Unterlagen)     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ +10     â”‚
â”‚  â”‚ â€¢ TeamfÃ¤higkeit erkennbar                                 â”‚
â”‚  â”‚ â€¢ Belastbarkeit (Schichtdienst-Erfahrung)                â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ Das kÃ¶nnte GEGEN Sie sprechen (Score: -8):                â”‚
â”‚                                                                 â”‚
â”‚  â”‚ FÃ¼hrungserfahrung                â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ -3      â”‚
â”‚  â”‚ â€¢ Nicht erkennbar (optional, aber gewÃ¼nscht)              â”‚
â”‚  â”‚                                                            â”‚
â”‚  â”‚ Spezielle Kenntnisse             â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ -5      â”‚
â”‚  â”‚ â€¢ Beatmungspflege nicht explizit genannt                  â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’¡ SO VERBESSERN SIE IHRE CHANCEN:                           â”‚
â”‚                                                                 â”‚
â”‚  1. ErwÃ¤hnen Sie im Anschreiben:                              â”‚
â”‚     â†’ Ihre Erfahrung mit Beatmungspatienten (falls vorhanden) â”‚
â”‚     â†’ Konkrete Beispiele fÃ¼r TeamfÃ¼hrung/Anleitung            â”‚
â”‚                                                                 â”‚
â”‚  2. Heben Sie hervor:                                          â”‚
â”‚     â†’ Ihre Intensivpflege-Weiterbildung (groÃŸes Plus!)        â”‚
â”‚     â†’ Ihre Ã¼berdurchschnittliche Berufserfahrung              â”‚
â”‚                                                                 â”‚
â”‚  3. Wohnort-Vorteil:                                           â”‚
â”‚     â†’ Sie wohnen nur 25km vom Einsatzort entfernt âœ“           â”‚
â”‚                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¯ FAZIT:                                                     â”‚
â”‚                                                                 â”‚
â”‚  Mit 87% Einstellungschance gehÃ¶ren Sie zu den Top-Kandidaten â”‚
â”‚  fÃ¼r diese Position. Wir empfehlen eine Bewerbung!            â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                 â”‚
â”‚       [ğŸš€ JETZT MIT OPTIMIERTEM PROFIL BEWERBEN]              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technische Architektur

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SYSTEM-ARCHITEKTUR                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  FRONTEND (Browser)                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Alpine.js Component                                     â”‚   â”‚
â”‚  â”‚  â€¢ Drag & Drop Upload                                    â”‚   â”‚
â”‚  â”‚  â€¢ Progress-Anzeige                                      â”‚   â”‚
â”‚  â”‚  â€¢ Ergebnis-Darstellung                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                   â”‚
â”‚                             â”‚ REST API                          â”‚
â”‚                             â–¼                                   â”‚
â”‚  WORDPRESS PLUGIN                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚  â”‚  â”‚   Upload     â”‚    â”‚   Analyse    â”‚                   â”‚   â”‚
â”‚  â”‚  â”‚   Handler    â”‚â”€â”€â”€â–¶â”‚   Service    â”‚                   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚  â”‚                             â”‚                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚  â”‚  â”‚   Limit      â”‚â—€â”€â”€â”€â”‚   AI        â”‚                    â”‚   â”‚
â”‚  â”‚  â”‚   Checker    â”‚    â”‚   Client    â”‚                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚  â”‚                             â”‚                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                â”‚
â”‚                                â”‚ API Call                       â”‚
â”‚                                â–¼                                â”‚
â”‚  AI PROVIDER (Primary: Anthropic, Fallback: OpenAI)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â€¢ PDF/DOC Text-Extraktion                              â”‚   â”‚
â”‚  â”‚  â€¢ Profil-Analyse                                        â”‚   â”‚
â”‚  â”‚  â€¢ Job-Matching                                          â”‚   â”‚
â”‚  â”‚  â€¢ Chancen-Berechnung                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Asynchrone Verarbeitung mit Action Scheduler

### Problem: Shared-Hosting Limitierungen

Viele WordPress-Installationen laufen auf Shared-Hosting mit:
- `max_execution_time`: 30-60 Sekunden
- Limitierter RAM (128-256 MB)
- Keine Background-Prozesse

**Risiko:** Bei groÃŸen PDFs oder langsamer AI-API bricht der Request ab.

### LÃ¶sung: WordPress Action Scheduler

Statt synchroner Verarbeitung wird die Analyse in eine Queue eingereiht und im Hintergrund verarbeitet.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ASYNCHRONER ANALYSE-FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  BEWERBER                    SERVER                    AI-API   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                  â”‚
â”‚  1. Upload â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Datei speichern                  â”‚
â”‚                                Job in Queue                      â”‚
â”‚  2. â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ "Analyse gestartet"                â”‚
â”‚     [Fortschrittsbalken]       Status: pending                   â”‚
â”‚                                                                  â”‚
â”‚  3. Polling (3s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Status abfragen                  â”‚
â”‚     â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Status: processing                 â”‚
â”‚                                                                  â”‚
â”‚                                Action Scheduler â”€â”€â”€â”€â–º AI-Call   â”‚
â”‚                                â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ergebnis   â”‚
â”‚                                Status: completed                 â”‚
â”‚                                                                  â”‚
â”‚  4. Polling (3s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Status abfragen                  â”‚
â”‚     â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Status: completed + Daten          â”‚
â”‚                                                                  â”‚
â”‚  5. Ergebnis anzeigen                                           â”‚
â”‚     Formular vorausgefÃ¼llt                                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Implementierung

```php
<?php
// src/AI/Queue/AnalysisQueue.php

namespace RecruitingPlaybook\AI\Queue;

use ActionScheduler;

class AnalysisQueue {

    private const HOOK = 'rp_process_ai_analysis';

    /**
     * Analyse in Queue einreihen
     */
    public function enqueue( array $analysis_request ): string {
        // Eindeutige Job-ID generieren
        $job_id = wp_generate_uuid4();

        // Request-Daten speichern
        set_transient( "rp_analysis_{$job_id}", [
            'status'     => 'pending',
            'request'    => $analysis_request,
            'created_at' => time(),
        ], HOUR_IN_SECONDS );

        // Job schedulen (sofort)
        as_enqueue_async_action( self::HOOK, [ 'job_id' => $job_id ], 'recruiting-playbook' );

        return $job_id;
    }

    /**
     * Status abfragen
     */
    public function get_status( string $job_id ): array {
        $data = get_transient( "rp_analysis_{$job_id}" );

        if ( ! $data ) {
            return [
                'status'  => 'not_found',
                'message' => __( 'Analyse nicht gefunden.', 'recruiting-playbook' ),
            ];
        }

        return $data;
    }

    /**
     * Job verarbeiten (wird vom Action Scheduler aufgerufen)
     */
    public static function process( string $job_id ): void {
        $data = get_transient( "rp_analysis_{$job_id}" );

        if ( ! $data || $data['status'] !== 'pending' ) {
            return;
        }

        // Status auf "processing" setzen
        $data['status'] = 'processing';
        $data['started_at'] = time();
        set_transient( "rp_analysis_{$job_id}", $data, HOUR_IN_SECONDS );

        try {
            // Analyse durchfÃ¼hren
            $analysis_service = new \RecruitingPlaybook\AI\Services\AnalysisService();
            $result = $analysis_service->analyze( $data['request'] );

            // Erfolg speichern
            $data['status'] = 'completed';
            $data['result'] = $result;
            $data['completed_at'] = time();

        } catch ( \Exception $e ) {
            // Fehler speichern
            $data['status'] = 'failed';
            $data['error'] = $e->getMessage();
            $data['failed_at'] = time();
        }

        set_transient( "rp_analysis_{$job_id}", $data, HOUR_IN_SECONDS );
    }
}

// Hook registrieren
add_action( AnalysisQueue::HOOK, [ AnalysisQueue::class, 'process' ] );
```

### REST API Endpoints

```php
<?php
// src/Api/AnalysisController.php

// POST /wp-json/recruiting/v1/analysis
// â†’ Startet Analyse, gibt Job-ID zurÃ¼ck
register_rest_route( 'recruiting/v1', '/analysis', [
    'methods'  => 'POST',
    'callback' => function( WP_REST_Request $request ) {
        $queue = new AnalysisQueue();

        $job_id = $queue->enqueue( [
            'job_id'    => $request->get_param( 'job_id' ),
            'mode'      => $request->get_param( 'mode' ),
            'files'     => $request->get_file_params(),
        ] );

        return new WP_REST_Response( [
            'job_id'  => $job_id,
            'status'  => 'pending',
            'message' => __( 'Analyse gestartet.', 'recruiting-playbook' ),
        ], 202 ); // 202 Accepted
    },
] );

// GET /wp-json/recruiting/v1/analysis/{job_id}
// â†’ Status und Ergebnis abfragen
register_rest_route( 'recruiting/v1', '/analysis/(?P<job_id>[a-f0-9-]+)', [
    'methods'  => 'GET',
    'callback' => function( WP_REST_Request $request ) {
        $queue = new AnalysisQueue();
        $status = $queue->get_status( $request->get_param( 'job_id' ) );

        return new WP_REST_Response( $status );
    },
] );
```

### Frontend: Alpine.js Polling

```javascript
// assets/js/ai-analysis.js

function aiAnalysis() {
    return {
        jobId: null,
        status: 'idle', // idle, uploading, pending, processing, completed, failed
        result: null,
        error: null,
        pollInterval: null,

        async uploadAndAnalyze(files, jobId, mode) {
            this.status = 'uploading';

            const formData = new FormData();
            files.forEach(file => formData.append('files[]', file));
            formData.append('job_id', jobId);
            formData.append('mode', mode);

            try {
                const response = await fetch('/wp-json/recruiting/v1/analysis', {
                    method: 'POST',
                    body: formData,
                    headers: { 'X-WP-Nonce': rpConfig.nonce }
                });

                const data = await response.json();
                this.jobId = data.job_id;
                this.status = 'pending';

                // Polling starten
                this.startPolling();

            } catch (e) {
                this.status = 'failed';
                this.error = 'Upload fehlgeschlagen';
            }
        },

        startPolling() {
            this.pollInterval = setInterval(async () => {
                const response = await fetch(
                    `/wp-json/recruiting/v1/analysis/${this.jobId}`,
                    { headers: { 'X-WP-Nonce': rpConfig.nonce } }
                );

                const data = await response.json();
                this.status = data.status;

                if (data.status === 'completed') {
                    this.result = data.result;
                    this.stopPolling();
                } else if (data.status === 'failed') {
                    this.error = data.error;
                    this.stopPolling();
                }
            }, 3000); // Alle 3 Sekunden

            // Timeout nach 2 Minuten
            setTimeout(() => {
                if (this.status === 'pending' || this.status === 'processing') {
                    this.showFallbackOption();
                }
            }, 120000);
        },

        stopPolling() {
            if (this.pollInterval) {
                clearInterval(this.pollInterval);
                this.pollInterval = null;
            }
        },

        showFallbackOption() {
            // Option anbieten, ohne Analyse fortzufahren
            this.status = 'timeout';
        }
    };
}
```

### UI-ZustÃ¤nde

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STATUS: pending                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â³ Dokument wird analysiert...                      â”‚   â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40%                           â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  Dies kann einige Sekunden dauern.                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STATUS: timeout (nach 2 Min)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â° Die Analyse dauert lÃ¤nger als erwartet.          â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  Sie kÃ¶nnen:                                         â”‚   â”‚
â”‚  â”‚  [Weiter warten]  [Ohne Analyse fortfahren]         â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  Die Analyse lÃ¤uft im Hintergrund weiter.           â”‚   â”‚
â”‚  â”‚  Sie kÃ¶nnen das Ergebnis spÃ¤ter per E-Mail erhalten.â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Composer: Action Scheduler

```json
{
    "require": {
        "woocommerce/action-scheduler": "^3.6"
    }
}
```

**Hinweis:** Action Scheduler ist bereits in WooCommerce enthalten. Falls WooCommerce aktiv ist, wird die vorhandene Version genutzt.

---

## AI-Provider Fallback-Strategie

### Risiko: Single Point of Failure

Das KI-Feature hÃ¤ngt von externen API-Providern ab. Folgende Risiken bestehen:
- PreiserhÃ¶hungen durch Anthropic
- API-Ã„nderungen oder Deprecation
- Regionale EinschrÃ¤nkungen (EU-Datenschutz)
- Service-AusfÃ¤lle

### LÃ¶sung: Provider-Abstraktionsschicht

```php
<?php
// src/AI/Client/AIClientInterface.php

namespace RecruitingPlaybook\AI\Client;

interface AIClientInterface {

    /**
     * Analyse durchfÃ¼hren
     */
    public function analyze( string $prompt, array $options = [] ): array;

    /**
     * Provider-Name
     */
    public function get_provider_name(): string;

    /**
     * Ist der Provider verfÃ¼gbar?
     */
    public function is_available(): bool;

    /**
     * GeschÃ¤tzte Kosten pro Request
     */
    public function estimate_cost( int $input_tokens, int $output_tokens ): float;
}
```

### Implementierte Provider

| Provider | Klasse | Status | PrioritÃ¤t |
|----------|--------|--------|-----------|
| **Anthropic Claude** | `ClaudeClient` | Primary | 1 |
| **OpenAI GPT-4** | `OpenAIClient` | Fallback | 2 |
| **Lokales LLM** | `LocalLLMClient` | Zukunft | 3 |

### Provider-Manager mit Fallback

```php
<?php
// src/AI/Client/AIProviderManager.php

namespace RecruitingPlaybook\AI\Client;

class AIProviderManager {

    private array $providers = [];

    public function __construct() {
        // Provider nach PrioritÃ¤t registrieren
        $this->register_provider( new ClaudeClient(), 1 );
        $this->register_provider( new OpenAIClient(), 2 );
    }

    /**
     * Analyse mit automatischem Fallback
     */
    public function analyze( string $prompt, array $options = [] ): array {
        $last_error = null;

        foreach ( $this->get_sorted_providers() as $provider ) {
            if ( ! $provider->is_available() ) {
                continue;
            }

            try {
                $result = $provider->analyze( $prompt, $options );

                // Erfolg loggen
                $this->log_success( $provider->get_provider_name() );

                return $result;

            } catch ( AIProviderException $e ) {
                $last_error = $e;

                // Fehler loggen, nÃ¤chsten Provider versuchen
                $this->log_failure( $provider->get_provider_name(), $e );
                continue;
            }
        }

        // Alle Provider fehlgeschlagen
        throw new AIServiceUnavailableException(
            __( 'KI-Analyse derzeit nicht verfÃ¼gbar. Bitte versuchen Sie es spÃ¤ter erneut.', 'recruiting-playbook' ),
            0,
            $last_error
        );
    }
}
```

### Einstellungen fÃ¼r Provider-Wahl

```php
// Admin-Einstellungen: rp_settings[ai]
[
    'primary_provider' => 'anthropic',      // anthropic, openai
    'fallback_enabled' => true,
    'anthropic_api_key' => '...',
    'openai_api_key' => '...',              // Optional fÃ¼r Fallback
    'max_retries' => 2,
    'retry_delay_ms' => 1000,
]
```

---

## Error-Handling & Partial Success

### Fehlerszenarien

| Szenario | Ursache | Handling |
|----------|---------|----------|
| **UngÃ¼ltiges JSON** | AI-Halluzination, abgeschnittene Antwort | JSON-Repair versuchen, dann Fallback |
| **Timeout** | GroÃŸe Dokumente, API-Last | Retry mit Backoff |
| **Rate Limit** | Zu viele Requests | Queue, spÃ¤ter verarbeiten |
| **Partial Success** | Profil erkannt, aber Match fehlgeschlagen | Teilergebnis zurÃ¼ckgeben |
| **Dokument nicht lesbar** | Gescanntes PDF ohne OCR, korrupte Datei | Benutzer informieren |

### Robuste JSON-Verarbeitung

```php
<?php
// src/AI/Parser/ResponseParser.php

namespace RecruitingPlaybook\AI\Parser;

class ResponseParser {

    /**
     * AI-Response parsen mit Fehlertoleranz
     */
    public function parse( string $response, string $expected_type ): ParsedResponse {
        // 1. Versuche direktes JSON-Parsing
        $data = json_decode( $response, true );

        if ( json_last_error() === JSON_ERROR_NONE ) {
            return $this->validate_and_return( $data, $expected_type );
        }

        // 2. JSON aus Markdown-Codeblock extrahieren
        if ( preg_match( '/```(?:json)?\s*([\s\S]*?)```/', $response, $matches ) ) {
            $data = json_decode( trim( $matches[1] ), true );

            if ( json_last_error() === JSON_ERROR_NONE ) {
                return $this->validate_and_return( $data, $expected_type );
            }
        }

        // 3. JSON-Repair versuchen (fehlende Klammern, Kommas)
        $repaired = $this->attempt_json_repair( $response );

        if ( $repaired ) {
            return $this->validate_and_return( $repaired, $expected_type, true );
        }

        // 4. Fehlschlag
        throw new InvalidResponseException(
            __( 'Die KI-Antwort konnte nicht verarbeitet werden.', 'recruiting-playbook' ),
            $response
        );
    }

    /**
     * Validierung und Partial Success Handling
     */
    private function validate_and_return( array $data, string $type, bool $was_repaired = false ): ParsedResponse {
        $result = new ParsedResponse();
        $result->was_repaired = $was_repaired;

        // Pflichtfelder nach Typ prÃ¼fen
        $required = $this->get_required_fields( $type );
        $missing = [];

        foreach ( $required as $field ) {
            if ( ! isset( $data[ $field ] ) ) {
                $missing[] = $field;
            }
        }

        if ( ! empty( $missing ) ) {
            // Partial Success: Vorhandene Daten zurÃ¼ckgeben
            $result->is_partial = true;
            $result->missing_fields = $missing;
            $result->data = $data;

            return $result;
        }

        $result->is_complete = true;
        $result->data = $data;

        return $result;
    }
}
```

### Partial Success Response

```php
<?php
// Beispiel: Profil erkannt, aber Match-Score fehlgeschlagen

// API Response an Frontend
[
    'success' => true,
    'partial' => true,
    'data' => [
        'profile' => [
            'name' => 'Max Mustermann',
            'email' => 'max@example.com',
            'profession' => 'Pflegefachkraft',
        ],
        'match_score' => null,  // Konnte nicht berechnet werden
        'fulfilled' => [],
        'missing' => [],
    ],
    'warnings' => [
        [
            'code' => 'match_score_unavailable',
            'message' => 'Der Match-Score konnte nicht berechnet werden. Die erkannten Profildaten stehen zur VerfÃ¼gung.',
        ]
    ],
    'can_proceed' => true,  // Bewerbung trotzdem mÃ¶glich
]
```

---

## Dokument-Parsing: Shared-Hosting-KompatibilitÃ¤t

### Problem

Viele Shared-Hosting-Umgebungen:
- Erlauben kein `shell_exec()` oder `exec()`
- Haben kein `pdftotext` installiert
- Haben niedrige Memory-Limits

### LÃ¶sung: Reine PHP-Fallback-Kaskade

```php
<?php
// src/AI/Parser/DocumentParser.php

namespace RecruitingPlaybook\AI\Parser;

class DocumentParser {

    /**
     * Text-Extraktion mit Fallback-Kette
     */
    public function extract_text( array $files ): ExtractedText {
        $result = new ExtractedText();

        foreach ( $files as $file ) {
            $extension = strtolower( pathinfo( $file['name'], PATHINFO_EXTENSION ) );

            try {
                $text = match ( $extension ) {
                    'pdf'  => $this->extract_from_pdf( $file['tmp_name'] ),
                    'doc'  => $this->extract_from_doc( $file['tmp_name'] ),
                    'docx' => $this->extract_from_docx( $file['tmp_name'] ),
                    'txt'  => file_get_contents( $file['tmp_name'] ),
                    default => throw new UnsupportedFormatException( $extension ),
                };

                $result->add_text( $text, $file['name'] );

            } catch ( ExtractionFailedException $e ) {
                $result->add_failure( $file['name'], $e->getMessage() );
            }
        }

        return $result;
    }

    /**
     * PDF-Extraktion mit Fallback-Kette
     */
    private function extract_from_pdf( string $path ): string {
        // Methode 1: pdftotext (Server-Tool) - schnellste Option
        if ( $this->can_use_shell() && $this->command_exists( 'pdftotext' ) ) {
            $output = shell_exec( sprintf(
                'pdftotext -layout %s - 2>/dev/null',
                escapeshellarg( $path )
            ) );

            if ( ! empty( trim( $output ) ) ) {
                return $output;
            }
        }

        // Methode 2: Smalot/PdfParser (reine PHP-Library)
        if ( class_exists( '\Smalot\PdfParser\Parser' ) ) {
            try {
                $parser = new \Smalot\PdfParser\Parser();
                $pdf = $parser->parseFile( $path );
                $text = $pdf->getText();

                if ( ! empty( trim( $text ) ) ) {
                    return $text;
                }
            } catch ( \Exception $e ) {
                // Weiter zum nÃ¤chsten Fallback
            }
        }

        // Methode 3: TCPDF-basierter Parser (einfacher, weniger Features)
        if ( class_exists( '\TCPDF_PARSER' ) ) {
            // ... Implementierung
        }

        // Methode 4: Cloud-OCR fÃ¼r gescannte PDFs
        if ( $this->is_ocr_enabled() && $this->appears_to_be_scanned( $path ) ) {
            return $this->extract_via_ocr( $path );
        }

        // Alle Methoden fehlgeschlagen
        throw new ExtractionFailedException(
            __( 'PDF konnte nicht gelesen werden. MÃ¶glicherweise ist es ein gescanntes Dokument ohne Textebene.', 'recruiting-playbook' )
        );
    }

    /**
     * PrÃ¼ft ob shell_exec verfÃ¼gbar ist
     */
    private function can_use_shell(): bool {
        if ( ! function_exists( 'shell_exec' ) ) {
            return false;
        }

        $disabled = explode( ',', ini_get( 'disable_functions' ) );
        return ! in_array( 'shell_exec', array_map( 'trim', $disabled ), true );
    }

    /**
     * Erkennt gescannte PDFs (keine Textebene)
     */
    private function appears_to_be_scanned( string $path ): bool {
        // Einfache Heuristik: DateigrÃ¶ÃŸe vs. extrahierter Text
        $file_size = filesize( $path );

        // PDF > 100KB aber kaum Text = wahrscheinlich gescannt
        if ( $file_size > 100 * 1024 ) {
            try {
                $parser = new \Smalot\PdfParser\Parser();
                $pdf = $parser->parseFile( $path );
                $text = trim( $pdf->getText() );

                // Weniger als 100 Zeichen bei > 100KB = gescannt
                return strlen( $text ) < 100;
            } catch ( \Exception $e ) {
                return true; // Im Zweifel: OCR versuchen
            }
        }

        return false;
    }
}
```

---

## OCR-Integration fÃ¼r gescannte Dokumente

### Problem

Viele Bewerber:
- Fotografieren Zeugnisse mit dem Handy
- Scannen Dokumente ohne OCR-Funktion
- Laden PDFs hoch, die nur Bilder enthalten

### LÃ¶sung: Cloud-OCR-Integration (optional)

```php
<?php
// src/AI/OCR/OCRService.php

namespace RecruitingPlaybook\AI\OCR;

class OCRService {

    /**
     * VerfÃ¼gbare OCR-Provider
     */
    private const PROVIDERS = [
        'google_vision' => GoogleVisionOCR::class,
        'aws_textract'  => AWSTextractOCR::class,
        'azure_vision'  => AzureVisionOCR::class,
    ];

    /**
     * Text via OCR extrahieren
     */
    public function extract( string $file_path ): string {
        $provider = $this->get_configured_provider();

        if ( ! $provider ) {
            throw new OCRNotConfiguredException(
                __( 'OCR ist nicht konfiguriert. Bitte laden Sie ein Dokument mit Textebene hoch.', 'recruiting-playbook' )
            );
        }

        // Bild aus PDF extrahieren falls nÃ¶tig
        $image_path = $this->prepare_image( $file_path );

        try {
            $text = $provider->recognize( $image_path );

            // OCR-Nutzung loggen (fÃ¼r Kostentracking)
            $this->log_ocr_usage( $provider->get_name(), filesize( $file_path ) );

            return $text;

        } finally {
            // TemporÃ¤res Bild lÃ¶schen
            if ( $image_path !== $file_path ) {
                @unlink( $image_path );
            }
        }
    }
}
```

### OCR-Einstellungen

```php
// Admin-Einstellungen: rp_settings[ai][ocr]
[
    'enabled' => false,                  // StandardmÃ¤ÃŸig deaktiviert
    'provider' => 'google_vision',
    'google_vision_api_key' => '...',
    'aws_access_key' => '...',
    'aws_secret_key' => '...',
    'max_file_size_mb' => 5,            // OCR-Limit
    'monthly_budget_eur' => 50,          // Kostendeckel
]
```

### OCR-Limits zum Schutz der Marge

Um die Wirtschaftlichkeit des AI-Addons (19â‚¬/Monat) zu schÃ¼tzen, gelten strikte Limits fÃ¼r OCR-Verarbeitung:

| Parameter | Limit | BegrÃ¼ndung |
|-----------|-------|------------|
| **Seiten pro Dokument** | 10 | CV + Anschreiben + Zeugnis realistisch |
| **Seiten pro Analyse** | 20 | Bei mehreren Dokumenten |
| **Max. AuflÃ¶sung** | 300 DPI | Reicht fÃ¼r OCR, spart Kosten |
| **DateigrÃ¶ÃŸe (OCR)** | 5 MB | ZusÃ¤tzlich zum 10 MB Upload-Limit |

```php
<?php
// src/AI/OCR/OCRLimiter.php

namespace RecruitingPlaybook\AI\OCR;

class OCRLimiter {

    private const MAX_PAGES_PER_DOCUMENT = 10;
    private const MAX_PAGES_PER_ANALYSIS = 20;
    private const MAX_DPI = 300;
    private const MAX_FILE_SIZE_MB = 5;

    /**
     * Dokument vor OCR prÃ¼fen und ggf. beschrÃ¤nken
     */
    public function enforce_limits( string $file_path ): LimitResult {
        $result = new LimitResult();
        $result->original_path = $file_path;

        // 1. DateigrÃ¶ÃŸe prÃ¼fen
        $size_mb = filesize( $file_path ) / ( 1024 * 1024 );
        if ( $size_mb > self::MAX_FILE_SIZE_MB ) {
            $result->rejected = true;
            $result->reason = 'file_too_large';
            $result->message = sprintf(
                __( 'Datei zu groÃŸ fÃ¼r OCR (%s MB). Maximum: %s MB.', 'recruiting-playbook' ),
                number_format( $size_mb, 1 ),
                self::MAX_FILE_SIZE_MB
            );
            return $result;
        }

        // 2. Seitenzahl prÃ¼fen (nur bei PDF)
        if ( $this->is_pdf( $file_path ) ) {
            $page_count = $this->get_pdf_page_count( $file_path );

            if ( $page_count > self::MAX_PAGES_PER_DOCUMENT ) {
                $result->truncated = true;
                $result->original_pages = $page_count;
                $result->processed_pages = self::MAX_PAGES_PER_DOCUMENT;
                $result->warnings[] = sprintf(
                    __( 'Dokument hat %d Seiten. Nur die ersten %d werden analysiert.', 'recruiting-playbook' ),
                    $page_count,
                    self::MAX_PAGES_PER_DOCUMENT
                );

                // Nur erste X Seiten extrahieren
                $result->processed_path = $this->extract_pages(
                    $file_path,
                    1,
                    self::MAX_PAGES_PER_DOCUMENT
                );
            }
        }

        // 3. AuflÃ¶sung reduzieren wenn nÃ¶tig (bei Bildern)
        if ( $this->is_image( $file_path ) ) {
            $dpi = $this->get_image_dpi( $file_path );

            if ( $dpi > self::MAX_DPI ) {
                $result->downscaled = true;
                $result->processed_path = $this->reduce_dpi( $file_path, self::MAX_DPI );
                $result->warnings[] = sprintf(
                    __( 'BildauflÃ¶sung von %d DPI auf %d DPI reduziert.', 'recruiting-playbook' ),
                    $dpi,
                    self::MAX_DPI
                );
            }
        }

        $result->processed_path = $result->processed_path ?? $file_path;
        return $result;
    }

    /**
     * Gesamtlimit fÃ¼r eine Analyse prÃ¼fen
     */
    public function check_analysis_limit( array $documents ): bool {
        $total_pages = 0;

        foreach ( $documents as $doc ) {
            if ( $this->is_pdf( $doc ) ) {
                $total_pages += min(
                    $this->get_pdf_page_count( $doc ),
                    self::MAX_PAGES_PER_DOCUMENT
                );
            } else {
                $total_pages += 1; // Bild = 1 Seite
            }
        }

        return $total_pages <= self::MAX_PAGES_PER_ANALYSIS;
    }

    /**
     * PDF-Seitenzahl ermitteln
     */
    private function get_pdf_page_count( string $path ): int {
        if ( class_exists( '\Smalot\PdfParser\Parser' ) ) {
            try {
                $parser = new \Smalot\PdfParser\Parser();
                $pdf = $parser->parseFile( $path );
                return count( $pdf->getPages() );
            } catch ( \Exception $e ) {
                return 1; // Fallback
            }
        }

        // Fallback: Aus PDF-Metadaten lesen
        $content = file_get_contents( $path, false, null, 0, 1024 * 100 );
        if ( preg_match( '/\/Count\s+(\d+)/', $content, $matches ) ) {
            return (int) $matches[1];
        }

        return 1;
    }

    /**
     * Erste X Seiten aus PDF extrahieren
     */
    private function extract_pages( string $path, int $start, int $end ): string {
        // TemporÃ¤re Datei erstellen
        $temp_path = sys_get_temp_dir() . '/' . wp_generate_uuid4() . '.pdf';

        // Mit FPDI/TCPDF extrahieren
        if ( class_exists( '\setasign\Fpdi\Fpdi' ) ) {
            $pdf = new \setasign\Fpdi\Fpdi();

            for ( $i = $start; $i <= $end; $i++ ) {
                $pdf->AddPage();
                $pdf->setSourceFile( $path );
                $tpl = $pdf->importPage( $i );
                $pdf->useTemplate( $tpl );
            }

            $pdf->Output( $temp_path, 'F' );
            return $temp_path;
        }

        // Fallback: Original zurÃ¼ckgeben
        return $path;
    }
}
```

### Benutzer-Feedback bei Limits

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â„¹ï¸ Dokument wurde fÃ¼r die Analyse optimiert                â”‚
â”‚                                                             â”‚
â”‚  â€¢ Ihr PDF hat 47 Seiten. Die ersten 10 werden analysiert. â”‚
â”‚  â€¢ Die BildauflÃ¶sung wurde von 600 auf 300 DPI reduziert.  â”‚
â”‚                                                             â”‚
â”‚  Dies hat keinen Einfluss auf die QualitÃ¤t der Analyse.    â”‚
â”‚  FÃ¼r LebenslÃ¤ufe und Zeugnisse sind 10 Seiten ausreichend. â”‚
â”‚                                                             â”‚
â”‚  [Verstanden, weiter zur Analyse]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Benutzer-Hinweis bei fehlgeschlagener Extraktion

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ Dokument konnte nicht vollstÃ¤ndig gelesen werden        â”‚
â”‚                                                             â”‚
â”‚  Das hochgeladene PDF scheint ein gescanntes Dokument      â”‚
â”‚  ohne Textebene zu sein.                                    â”‚
â”‚                                                             â”‚
â”‚  Empfehlungen:                                              â”‚
â”‚  â€¢ Laden Sie das Original-Dokument hoch (Word, PDF mit Text)â”‚
â”‚  â€¢ Nutzen Sie eine Scanner-App mit OCR-Funktion            â”‚
â”‚  â€¢ Aktivieren Sie bei Ihrem Scanner die OCR-Option         â”‚
â”‚                                                             â”‚
â”‚  [Trotzdem fortfahren]  [Anderes Dokument hochladen]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## TemporÃ¤re Dateien & DSGVO-Compliance

### Problem

Bei der KI-Analyse werden Bewerberdokumente temporÃ¤r gespeichert:
- Upload in `uploads/recruiting-playbook/documents/`
- Verarbeitung durch Parser
- API-Call mit Dokumentinhalt

**Risiken:**
- PHP-Script-Abbruch â†’ Datei bleibt liegen
- Fehler bei Analyse â†’ Datei nicht gelÃ¶scht
- Verwaiste Dateien bei Server-Neustart

### LÃ¶sung: Cleanup-Mechanismus

```php
<?php
// src/AI/Cleanup/TempFileCleanup.php

namespace RecruitingPlaybook\AI\Cleanup;

class TempFileCleanup {

    private const TEMP_DIR = 'recruiting-playbook/ai-temp/';
    private const MAX_AGE_MINUTES = 30;

    /**
     * WP-Cron Event registrieren
     */
    public static function register(): void {
        // Alle 15 Minuten prÃ¼fen
        if ( ! wp_next_scheduled( 'rp_cleanup_ai_temp_files' ) ) {
            wp_schedule_event( time(), 'rp_15min', 'rp_cleanup_ai_temp_files' );
        }

        add_action( 'rp_cleanup_ai_temp_files', [ self::class, 'cleanup' ] );
    }

    /**
     * Cleanup durchfÃ¼hren
     */
    public static function cleanup(): void {
        $upload_dir = wp_upload_dir();
        $temp_path = $upload_dir['basedir'] . '/' . self::TEMP_DIR;

        if ( ! is_dir( $temp_path ) ) {
            return;
        }

        $files = glob( $temp_path . '*' );
        $threshold = time() - ( self::MAX_AGE_MINUTES * 60 );
        $deleted = 0;

        foreach ( $files as $file ) {
            if ( is_file( $file ) && filemtime( $file ) < $threshold ) {
                @unlink( $file );
                $deleted++;
            }
        }

        if ( $deleted > 0 ) {
            // Log fÃ¼r Debugging
            error_log( sprintf(
                '[Recruiting Playbook] Cleanup: %d temporÃ¤re AI-Dateien gelÃ¶scht.',
                $deleted
            ) );
        }
    }
}
```

### Sichere Datei-Verarbeitung

```php
<?php
// src/AI/Services/AnalysisService.php (erweitert)

class AnalysisService {

    /**
     * Analyse mit garantiertem Cleanup
     */
    public function analyze_with_cleanup( array $files, int $job_id ): JobMatchResult {
        $temp_files = [];

        try {
            // 1. Dateien in sicheres Temp-Verzeichnis kopieren
            foreach ( $files as $file ) {
                $temp_path = $this->create_temp_copy( $file );
                $temp_files[] = $temp_path;
            }

            // 2. Analyse durchfÃ¼hren
            $result = $this->analyze_job_match_internal( $temp_files, $job_id );

            return $result;

        } finally {
            // 3. IMMER aufrÃ¤umen, auch bei Exceptions
            foreach ( $temp_files as $temp_file ) {
                if ( file_exists( $temp_file ) ) {
                    @unlink( $temp_file );
                }
            }
        }
    }

    /**
     * Sichere Temp-Kopie erstellen
     */
    private function create_temp_copy( array $file ): string {
        $upload_dir = wp_upload_dir();
        $temp_dir = $upload_dir['basedir'] . '/recruiting-playbook/ai-temp/';

        // Verzeichnis erstellen falls nicht vorhanden
        if ( ! is_dir( $temp_dir ) ) {
            wp_mkdir_p( $temp_dir );

            // .htaccess fÃ¼r Sicherheit
            file_put_contents( $temp_dir . '.htaccess', "Deny from all\n" );
        }

        // UUID-basierter Dateiname (keine RÃ¼ckschlÃ¼sse auf Bewerber)
        $temp_name = wp_generate_uuid4() . '.' . pathinfo( $file['name'], PATHINFO_EXTENSION );
        $temp_path = $temp_dir . $temp_name;

        copy( $file['tmp_name'], $temp_path );

        return $temp_path;
    }
}
```

### WP-Cron Schedule

```php
<?php
// src/Core/Plugin.php (in init)

// Custom Cron-Intervall: alle 15 Minuten
add_filter( 'cron_schedules', function( $schedules ) {
    $schedules['rp_15min'] = [
        'interval' => 15 * 60,
        'display'  => __( 'Alle 15 Minuten', 'recruiting-playbook' ),
    ];
    return $schedules;
} );

// Cleanup registrieren
\RecruitingPlaybook\AI\Cleanup\TempFileCleanup::register();
```

### Komponenten

```php
<?php
// src/AI/Services/AnalysisService.php

namespace RecruitingPlaybook\AI\Services;

use RecruitingPlaybook\AI\Client\ClaudeClient;
use RecruitingPlaybook\AI\Parser\DocumentParser;
use RecruitingPlaybook\AI\Analyzer\ProfileAnalyzer;
use RecruitingPlaybook\AI\Analyzer\JobMatcher;
use RecruitingPlaybook\AI\Analyzer\ChanceCalculator;

class AnalysisService {
    
    private ClaudeClient $client;
    private DocumentParser $parser;
    private ProfileAnalyzer $profile_analyzer;
    private JobMatcher $job_matcher;
    private ChanceCalculator $chance_calculator;
    private LimitChecker $limit_checker;
    
    /**
     * Modus A: Job-Match
     * 
     * PrÃ¼ft ob ein Bewerber zu einer konkreten Stelle passt
     */
    public function analyze_job_match( array $files, int $job_id ): JobMatchResult {
        // Limit prÃ¼fen
        $this->limit_checker->check_and_decrement();
        
        // 1. Dokumente parsen
        $document_text = $this->parser->extract_text( $files );
        
        // 2. Job-Anforderungen laden
        $job = get_post( $job_id );
        $requirements = $this->get_job_requirements( $job_id );
        
        // 3. AI-Analyse
        $prompt = $this->build_job_match_prompt( $document_text, $job, $requirements );
        $response = $this->client->analyze( $prompt );
        
        // 4. Ergebnis strukturieren
        return new JobMatchResult( $response );
    }
    
    /**
     * Modus B: Job-Finder
     * 
     * Findet passende Stellen fÃ¼r einen Bewerber
     */
    public function find_matching_jobs( array $files, int $limit = 5 ): JobFinderResult {
        // Limit prÃ¼fen
        $this->limit_checker->check_and_decrement();
        
        // 1. Dokumente parsen
        $document_text = $this->parser->extract_text( $files );
        
        // 2. Alle aktiven Stellen laden
        $jobs = $this->get_all_active_jobs();
        
        // 3. AI-Analyse
        $prompt = $this->build_job_finder_prompt( $document_text, $jobs );
        $response = $this->client->analyze( $prompt );
        
        // 4. Ergebnis strukturieren & sortieren
        return new JobFinderResult( $response, $limit );
    }
    
    /**
     * Modus C: Chancen-Check
     * 
     * Berechnet Einstellungschancen fÃ¼r eine konkrete Stelle
     */
    public function calculate_chances( array $files, int $job_id ): ChanceResult {
        // Limit prÃ¼fen
        $this->limit_checker->check_and_decrement();
        
        // 1. Dokumente parsen
        $document_text = $this->parser->extract_text( $files );
        
        // 2. Job-Details laden
        $job = get_post( $job_id );
        $requirements = $this->get_job_requirements( $job_id );
        
        // 3. AI-Analyse (detaillierter als Job-Match)
        $prompt = $this->build_chance_prompt( $document_text, $job, $requirements );
        $response = $this->client->analyze( $prompt );
        
        // 4. Ergebnis strukturieren
        return new ChanceResult( $response );
    }
    
    /**
     * Profil aus Dokumenten extrahieren (fÃ¼r Formular-VorausfÃ¼llung)
     */
    public function extract_profile( array $files ): ProfileData {
        $document_text = $this->parser->extract_text( $files );
        
        $prompt = $this->build_profile_extraction_prompt( $document_text );
        $response = $this->client->analyze( $prompt );
        
        return new ProfileData( $response );
    }
}
```

### Claude Client

```php
<?php
// src/AI/Client/ClaudeClient.php

namespace RecruitingPlaybook\AI\Client;

class ClaudeClient {
    
    private const API_URL = 'https://api.anthropic.com/v1/messages';
    private const MODEL = 'claude-3-5-sonnet-20241022';
    
    private string $api_key;
    
    public function __construct() {
        $settings = get_option( 'rp_settings' );
        $this->api_key = $settings['ai']['anthropic_api_key'] ?? '';
    }
    
    /**
     * Analyse durchfÃ¼hren
     */
    public function analyze( string $prompt, array $options = [] ): array {
        if ( empty( $this->api_key ) ) {
            throw new \Exception( __( 'Anthropic API Key nicht konfiguriert.', 'recruiting-playbook' ) );
        }
        
        $response = wp_remote_post( self::API_URL, [
            'timeout' => 60,
            'headers' => [
                'Content-Type'      => 'application/json',
                'x-api-key'         => $this->api_key,
                'anthropic-version' => '2023-06-01',
            ],
            'body' => json_encode( [
                'model'      => $options['model'] ?? self::MODEL,
                'max_tokens' => $options['max_tokens'] ?? 4096,
                'messages'   => [
                    [
                        'role'    => 'user',
                        'content' => $prompt,
                    ],
                ],
            ] ),
        ] );
        
        if ( is_wp_error( $response ) ) {
            throw new \Exception( $response->get_error_message() );
        }
        
        $body = json_decode( wp_remote_retrieve_body( $response ), true );
        
        if ( isset( $body['error'] ) ) {
            throw new \Exception( $body['error']['message'] ?? 'Unknown API error' );
        }
        
        return $body;
    }
}
```

### Document Parser

```php
<?php
// src/AI/Parser/DocumentParser.php

namespace RecruitingPlaybook\AI\Parser;

class DocumentParser {
    
    /**
     * Text aus Dokumenten extrahieren
     */
    public function extract_text( array $files ): string {
        $texts = [];
        
        foreach ( $files as $file ) {
            $extension = strtolower( pathinfo( $file['name'], PATHINFO_EXTENSION ) );
            
            switch ( $extension ) {
                case 'pdf':
                    $texts[] = $this->extract_from_pdf( $file['tmp_name'] );
                    break;
                    
                case 'doc':
                case 'docx':
                    $texts[] = $this->extract_from_word( $file['tmp_name'] );
                    break;
                    
                case 'txt':
                    $texts[] = file_get_contents( $file['tmp_name'] );
                    break;
            }
        }
        
        return implode( "\n\n---\n\n", $texts );
    }
    
    /**
     * PDF Text-Extraktion
     */
    private function extract_from_pdf( string $path ): string {
        // Option 1: pdftotext (Server-Tool)
        if ( $this->command_exists( 'pdftotext' ) ) {
            $output = shell_exec( sprintf( 'pdftotext -layout %s -', escapeshellarg( $path ) ) );
            return $output ?: '';
        }
        
        // Option 2: Smalot/PdfParser (PHP Library)
        if ( class_exists( '\Smalot\PdfParser\Parser' ) ) {
            $parser = new \Smalot\PdfParser\Parser();
            $pdf = $parser->parseFile( $path );
            return $pdf->getText();
        }
        
        throw new \Exception( __( 'PDF-Extraktion nicht verfÃ¼gbar.', 'recruiting-playbook' ) );
    }
    
    /**
     * Word Text-Extraktion
     */
    private function extract_from_word( string $path ): string {
        // PhpWord Library
        if ( class_exists( '\PhpOffice\PhpWord\IOFactory' ) ) {
            $phpWord = \PhpOffice\PhpWord\IOFactory::load( $path );
            $text = '';
            
            foreach ( $phpWord->getSections() as $section ) {
                foreach ( $section->getElements() as $element ) {
                    if ( method_exists( $element, 'getText' ) ) {
                        $text .= $element->getText() . "\n";
                    }
                }
            }
            
            return $text;
        }
        
        throw new \Exception( __( 'Word-Extraktion nicht verfÃ¼gbar.', 'recruiting-playbook' ) );
    }
    
    private function command_exists( string $command ): bool {
        return ! empty( shell_exec( "which $command 2>/dev/null" ) );
    }
}
```

### Limit Checker

```php
<?php
// src/AI/Services/LimitChecker.php

namespace RecruitingPlaybook\AI\Services;

class LimitChecker {
    
    private const MONTHLY_LIMIT = 100;
    private const OPTION_KEY = 'rp_ai_usage';
    
    /**
     * PrÃ¼ft und reduziert das Limit
     */
    public function check_and_decrement(): void {
        $usage = $this->get_usage();
        
        // Monat prÃ¼fen
        if ( $usage['month'] !== date( 'Y-m' ) ) {
            // Neuer Monat: Reset
            $usage = [
                'month' => date( 'Y-m' ),
                'count' => 0,
                'extra' => $usage['extra'] ?? 0, // Extra-Pakete bleiben
            ];
        }
        
        $available = $this->get_available( $usage );
        
        if ( $available <= 0 ) {
            throw new \Exception( 
                __( 'Analyse-Limit erreicht. Bitte kaufen Sie ein Extra-Paket.', 'recruiting-playbook' )
            );
        }
        
        // Verbrauch erhÃ¶hen
        $usage['count']++;
        
        // Extra-Paket angreifen wenn Basis aufgebraucht
        if ( $usage['count'] > self::MONTHLY_LIMIT && $usage['extra'] > 0 ) {
            $usage['extra']--;
            $usage['count'] = self::MONTHLY_LIMIT; // Basis bleibt am Limit
        }
        
        update_option( self::OPTION_KEY, $usage );
    }
    
    /**
     * VerfÃ¼gbare Analysen
     */
    public function get_available( ?array $usage = null ): int {
        $usage = $usage ?? $this->get_usage();
        
        // MonatsprÃ¼fung
        if ( $usage['month'] !== date( 'Y-m' ) ) {
            return self::MONTHLY_LIMIT + ( $usage['extra'] ?? 0 );
        }
        
        $remaining_monthly = max( 0, self::MONTHLY_LIMIT - $usage['count'] );
        $extra = $usage['extra'] ?? 0;
        
        return $remaining_monthly + $extra;
    }
    
    /**
     * Extra-Paket hinzufÃ¼gen
     */
    public function add_extra_pack( int $amount = 50 ): void {
        $usage = $this->get_usage();
        $usage['extra'] = ( $usage['extra'] ?? 0 ) + $amount;
        update_option( self::OPTION_KEY, $usage );
    }
    
    /**
     * Usage-Status fÃ¼r Dashboard
     */
    public function get_status(): array {
        $usage = $this->get_usage();
        
        // Reset wenn neuer Monat
        if ( $usage['month'] !== date( 'Y-m' ) ) {
            $usage = [
                'month' => date( 'Y-m' ),
                'count' => 0,
                'extra' => $usage['extra'] ?? 0,
            ];
        }
        
        return [
            'used'      => $usage['count'],
            'limit'     => self::MONTHLY_LIMIT,
            'extra'     => $usage['extra'] ?? 0,
            'available' => $this->get_available( $usage ),
            'month'     => $usage['month'],
            'percent'   => min( 100, round( ( $usage['count'] / self::MONTHLY_LIMIT ) * 100 ) ),
        ];
    }
    
    private function get_usage(): array {
        return get_option( self::OPTION_KEY, [
            'month' => date( 'Y-m' ),
            'count' => 0,
            'extra' => 0,
        ] );
    }
}
```

### Prompts

```php
<?php
// src/AI/Prompts/AnalysisPrompts.php

namespace RecruitingPlaybook\AI\Prompts;

class AnalysisPrompts {
    
    /**
     * Job-Match Prompt (Modus A)
     */
    public static function job_match( string $cv_text, string $job_title, string $job_description, array $requirements ): string {
        $requirements_text = implode( "\n", array_map( fn( $r ) => "- $r", $requirements ) );
        
        return <<<PROMPT
Du bist ein erfahrener HR-Experte. Analysiere den folgenden Lebenslauf und prÃ¼fe die Eignung fÃ¼r die Stellenanzeige.

## STELLENANZEIGE
Titel: {$job_title}

Beschreibung:
{$job_description}

Anforderungen:
{$requirements_text}

## LEBENSLAUF DES BEWERBERS
{$cv_text}

## AUFGABE
Analysiere die Eignung des Bewerbers fÃ¼r diese Stelle und gib eine strukturierte Antwort im folgenden JSON-Format:

```json
{
    "match_score": 0-100,
    "summary": "Kurze Zusammenfassung der Eignung (1-2 SÃ¤tze)",
    "profile": {
        "name": "Name falls erkennbar",
        "email": "E-Mail falls erkennbar",
        "phone": "Telefon falls erkennbar",
        "profession": "Aktueller Beruf/Position",
        "experience_years": 0
    },
    "fulfilled": [
        {
            "requirement": "Anforderung",
            "detail": "Wie erfÃ¼llt"
        }
    ],
    "partial": [
        {
            "requirement": "Anforderung",
            "detail": "Was fehlt oder unklar ist"
        }
    ],
    "missing": [
        {
            "requirement": "Anforderung",
            "optional": true/false,
            "detail": "ErklÃ¤rung"
        }
    ],
    "recommendation": "Bewerbungsempfehlung und Tipps (2-3 SÃ¤tze)"
}
```

Antworte NUR mit dem JSON, keine zusÃ¤tzlichen ErklÃ¤rungen.
PROMPT;
    }
    
    /**
     * Job-Finder Prompt (Modus B)
     */
    public static function job_finder( string $cv_text, array $jobs ): string {
        $jobs_text = '';
        foreach ( $jobs as $job ) {
            $jobs_text .= "ID: {$job['id']}\n";
            $jobs_text .= "Titel: {$job['title']}\n";
            $jobs_text .= "Standort: {$job['location']}\n";
            $jobs_text .= "Anforderungen: {$job['requirements']}\n";
            $jobs_text .= "---\n";
        }
        
        return <<<PROMPT
Du bist ein erfahrener HR-Experte und Karriereberater. Analysiere den Lebenslauf und finde die am besten passenden Stellen.

## LEBENSLAUF
{$cv_text}

## VERFÃœGBARE STELLEN
{$jobs_text}

## AUFGABE
Analysiere die Eignung des Bewerbers fÃ¼r ALLE Stellen und gib eine Rangliste der besten Matches.

Antworte im folgenden JSON-Format:

```json
{
    "profile": {
        "name": "Name",
        "profession": "Beruf",
        "experience_years": 0,
        "key_skills": ["Skill 1", "Skill 2"],
        "location": "Wohnort falls erkennbar"
    },
    "matches": [
        {
            "job_id": 123,
            "score": 0-100,
            "reasons": ["Grund 1", "Grund 2"]
        }
    ]
}
```

Sortiere "matches" absteigend nach Score. Nur Stellen mit Score >= 60 aufnehmen.
Antworte NUR mit dem JSON.
PROMPT;
    }
    
    /**
     * Chancen-Check Prompt (Modus C)
     */
    public static function chance_check( string $cv_text, string $job_title, string $job_description, array $requirements ): string {
        $requirements_text = implode( "\n", array_map( fn( $r ) => "- $r", $requirements ) );
        
        return <<<PROMPT
Du bist ein erfahrener Headhunter mit 20 Jahren Erfahrung im Recruiting. Analysiere die Einstellungschancen dieses Bewerbers.

## STELLENANZEIGE
Titel: {$job_title}

Beschreibung:
{$job_description}

Anforderungen:
{$requirements_text}

## LEBENSLAUF DES BEWERBERS
{$cv_text}

## AUFGABE
Berechne die realistische Einstellungschance (0-100%) basierend auf:
- Fachliche Qualifikation (40% Gewichtung)
- Berufserfahrung (30% Gewichtung)  
- Zusatzqualifikationen (20% Gewichtung)
- Soft Skills / Cultural Fit (10% Gewichtung)

Antworte im JSON-Format:

```json
{
    "chance_percent": 0-100,
    "chance_label": "Sehr gut / Gut / Moderat / Gering",
    "factors_positive": [
        {
            "category": "Fachliche Qualifikation",
            "points": 0-20,
            "details": ["Detail 1", "Detail 2"]
        }
    ],
    "factors_negative": [
        {
            "category": "Kategorie",
            "points": -X,
            "details": ["Was fehlt"],
            "improvable": true/false
        }
    ],
    "tips": [
        {
            "type": "anschreiben",
            "tip": "Konkreter Tipp"
        }
    ],
    "conclusion": "Fazit und Empfehlung (2-3 SÃ¤tze)"
}
```

Sei realistisch aber ermutigend. Antworte NUR mit dem JSON.
PROMPT;
    }
    
    /**
     * Profil-Extraktion (fÃ¼r Formular-VorausfÃ¼llung)
     */
    public static function profile_extraction( string $cv_text ): string {
        return <<<PROMPT
Extrahiere die Kontaktdaten und das Berufsprofil aus diesem Lebenslauf.

## LEBENSLAUF
{$cv_text}

## AUFGABE
Extrahiere folgende Informationen falls vorhanden:

```json
{
    "first_name": "",
    "last_name": "",
    "email": "",
    "phone": "",
    "address": {
        "street": "",
        "zip": "",
        "city": ""
    },
    "profession": "Aktuelle Berufsbezeichnung",
    "experience_years": 0,
    "highest_education": "HÃ¶chster Abschluss",
    "skills": ["Skill 1", "Skill 2"],
    "languages": [
        {"language": "Deutsch", "level": "Muttersprache"}
    ],
    "available_from": "Datum falls genannt"
}
```

Nur Felder befÃ¼llen, die im Text erkennbar sind. Antworte NUR mit dem JSON.
PROMPT;
    }
}
```

---

## REST API Endpoints

```php
<?php
// src/AI/Api/AnalysisController.php

namespace RecruitingPlaybook\AI\Api;

use WP_REST_Request;
use WP_REST_Response;
use WP_Error;

class AnalysisController {
    
    public function register_routes(): void {
        register_rest_route( 'recruiting/v1', '/ai/job-match', [
            'methods'             => 'POST',
            'callback'            => [ $this, 'job_match' ],
            'permission_callback' => '__return_true', // Ã–ffentlich fÃ¼r Bewerber
        ] );
        
        register_rest_route( 'recruiting/v1', '/ai/job-finder', [
            'methods'             => 'POST',
            'callback'            => [ $this, 'job_finder' ],
            'permission_callback' => '__return_true',
        ] );
        
        register_rest_route( 'recruiting/v1', '/ai/chance-check', [
            'methods'             => 'POST',
            'callback'            => [ $this, 'chance_check' ],
            'permission_callback' => '__return_true',
        ] );
        
        register_rest_route( 'recruiting/v1', '/ai/usage', [
            'methods'             => 'GET',
            'callback'            => [ $this, 'get_usage' ],
            'permission_callback' => [ $this, 'check_admin' ],
        ] );
    }
    
    /**
     * Modus A: Job-Match
     */
    public function job_match( WP_REST_Request $request ): WP_REST_Response|WP_Error {
        // AI-Addon Lizenz prÃ¼fen
        if ( ! rp_has_ai() ) {
            return new WP_Error( 'ai_not_licensed', 'AI-Addon nicht aktiviert', [ 'status' => 403 ] );
        }
        
        $files = $request->get_file_params();
        $job_id = $request->get_param( 'job_id' );
        
        if ( empty( $files['documents'] ) ) {
            return new WP_Error( 'no_files', 'Keine Dokumente hochgeladen', [ 'status' => 400 ] );
        }
        
        if ( ! $job_id ) {
            return new WP_Error( 'no_job', 'Keine Stelle angegeben', [ 'status' => 400 ] );
        }
        
        try {
            $service = new \RecruitingPlaybook\AI\Services\AnalysisService();
            $result = $service->analyze_job_match( $files['documents'], $job_id );
            
            return new WP_REST_Response( [
                'success' => true,
                'data'    => $result->to_array(),
            ] );
            
        } catch ( \Exception $e ) {
            return new WP_Error( 'analysis_failed', $e->getMessage(), [ 'status' => 500 ] );
        }
    }
    
    /**
     * Modus B: Job-Finder
     */
    public function job_finder( WP_REST_Request $request ): WP_REST_Response|WP_Error {
        if ( ! rp_has_ai() ) {
            return new WP_Error( 'ai_not_licensed', 'AI-Addon nicht aktiviert', [ 'status' => 403 ] );
        }
        
        $files = $request->get_file_params();
        $limit = $request->get_param( 'limit' ) ?? 5;
        
        if ( empty( $files['documents'] ) ) {
            return new WP_Error( 'no_files', 'Keine Dokumente hochgeladen', [ 'status' => 400 ] );
        }
        
        try {
            $service = new \RecruitingPlaybook\AI\Services\AnalysisService();
            $result = $service->find_matching_jobs( $files['documents'], $limit );
            
            return new WP_REST_Response( [
                'success' => true,
                'data'    => $result->to_array(),
            ] );
            
        } catch ( \Exception $e ) {
            return new WP_Error( 'analysis_failed', $e->getMessage(), [ 'status' => 500 ] );
        }
    }
    
    /**
     * Modus C: Chancen-Check
     */
    public function chance_check( WP_REST_Request $request ): WP_REST_Response|WP_Error {
        if ( ! rp_has_ai() ) {
            return new WP_Error( 'ai_not_licensed', 'AI-Addon nicht aktiviert', [ 'status' => 403 ] );
        }
        
        $files = $request->get_file_params();
        $job_id = $request->get_param( 'job_id' );
        
        try {
            $service = new \RecruitingPlaybook\AI\Services\AnalysisService();
            $result = $service->calculate_chances( $files['documents'], $job_id );
            
            return new WP_REST_Response( [
                'success' => true,
                'data'    => $result->to_array(),
            ] );
            
        } catch ( \Exception $e ) {
            return new WP_Error( 'analysis_failed', $e->getMessage(), [ 'status' => 500 ] );
        }
    }
    
    /**
     * Usage-Status
     */
    public function get_usage(): WP_REST_Response {
        $checker = new \RecruitingPlaybook\AI\Services\LimitChecker();
        
        return new WP_REST_Response( [
            'success' => true,
            'data'    => $checker->get_status(),
        ] );
    }
}
```

---

## Frontend Component (Alpine.js)

```javascript
// assets/js/ai-analyzer.js

document.addEventListener('alpine:init', () => {
    Alpine.data('aiAnalyzer', (mode = 'job-match', jobId = null) => ({
        // State
        mode: mode, // 'job-match', 'job-finder', 'chance-check'
        jobId: jobId,
        files: [],
        analyzing: false,
        progress: 0,
        result: null,
        error: null,
        
        // File handling
        onFileSelect(event) {
            this.files = Array.from(event.target.files);
            this.error = null;
            this.result = null;
        },
        
        onFileDrop(event) {
            event.preventDefault();
            this.files = Array.from(event.dataTransfer.files);
            this.error = null;
            this.result = null;
        },
        
        removeFile(index) {
            this.files.splice(index, 1);
        },
        
        // Analysis
        async analyze() {
            if (this.files.length === 0) {
                this.error = 'Bitte laden Sie mindestens einen Lebenslauf hoch.';
                return;
            }
            
            this.analyzing = true;
            this.progress = 0;
            this.error = null;
            
            // Progress simulation
            const progressInterval = setInterval(() => {
                if (this.progress < 90) {
                    this.progress += Math.random() * 15;
                }
            }, 500);
            
            try {
                const formData = new FormData();
                
                this.files.forEach(file => {
                    formData.append('documents[]', file);
                });
                
                if (this.jobId) {
                    formData.append('job_id', this.jobId);
                }
                
                const endpoint = this.getEndpoint();
                
                const response = await fetch(endpoint, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-WP-Nonce': window.rpData.nonce,
                    },
                });
                
                const data = await response.json();
                
                clearInterval(progressInterval);
                this.progress = 100;
                
                if (data.success) {
                    this.result = data.data;
                } else {
                    this.error = data.message || 'Analyse fehlgeschlagen.';
                }
                
            } catch (err) {
                clearInterval(progressInterval);
                this.error = 'Verbindungsfehler. Bitte versuchen Sie es erneut.';
                console.error(err);
            } finally {
                this.analyzing = false;
            }
        },
        
        getEndpoint() {
            const base = window.rpData.restUrl;
            
            switch (this.mode) {
                case 'job-match':
                    return `${base}ai/job-match`;
                case 'job-finder':
                    return `${base}ai/job-finder`;
                case 'chance-check':
                    return `${base}ai/chance-check`;
            }
        },
        
        // Result helpers
        getScoreColor(score) {
            if (score >= 80) return 'green';
            if (score >= 60) return 'yellow';
            return 'red';
        },
        
        getScoreLabel(score) {
            if (score >= 90) return 'Ausgezeichnet';
            if (score >= 80) return 'Sehr gut';
            if (score >= 70) return 'Gut';
            if (score >= 60) return 'Moderat';
            return 'Gering';
        },
        
        // Apply to form
        applyToForm() {
            if (!this.result?.profile) return;
            
            const profile = this.result.profile;
            const form = document.querySelector('.rp-application-form');
            
            if (!form) return;
            
            // Felder befÃ¼llen
            const fields = {
                'first_name': profile.first_name,
                'last_name': profile.last_name,
                'email': profile.email,
                'phone': profile.phone,
            };
            
            for (const [name, value] of Object.entries(fields)) {
                if (value) {
                    const input = form.querySelector(`[name="${name}"]`);
                    if (input) {
                        input.value = value;
                        input.dispatchEvent(new Event('input'));
                    }
                }
            }
            
            // Scroll zum Formular
            form.scrollIntoView({ behavior: 'smooth' });
        },
        
        // Reset
        reset() {
            this.files = [];
            this.result = null;
            this.error = null;
            this.progress = 0;
        },
    }));
});
```

---

## Admin Dashboard Widget

```php
<?php
// src/Admin/Widgets/AIUsageWidget.php

class AIUsageWidget {
    
    public function render(): void {
        if ( ! rp_has_ai() ) {
            $this->render_upgrade_prompt();
            return;
        }
        
        $checker = new \RecruitingPlaybook\AI\Services\LimitChecker();
        $status = $checker->get_status();
        
        ?>
        <div class="rp-widget rp-ai-usage">
            <h3><?php esc_html_e( 'KI-Analysen', 'recruiting-playbook' ); ?></h3>
            
            <div class="rp-usage-meter">
                <div class="rp-usage-bar">
                    <div 
                        class="rp-usage-bar__fill" 
                        style="width: <?php echo esc_attr( $status['percent'] ); ?>%"
                    ></div>
                </div>
                <div class="rp-usage-numbers">
                    <span class="rp-usage-used"><?php echo esc_html( $status['used'] ); ?></span>
                    <span class="rp-usage-separator">/</span>
                    <span class="rp-usage-limit"><?php echo esc_html( $status['limit'] ); ?></span>
                    <span class="rp-usage-label"><?php esc_html_e( 'Analysen', 'recruiting-playbook' ); ?></span>
                </div>
            </div>
            
            <?php if ( $status['extra'] > 0 ) : ?>
                <p class="rp-usage-extra">
                    + <?php echo esc_html( $status['extra'] ); ?> 
                    <?php esc_html_e( 'Extra-Analysen verfÃ¼gbar', 'recruiting-playbook' ); ?>
                </p>
            <?php endif; ?>
            
            <p class="rp-usage-reset">
                <?php printf(
                    esc_html__( 'Erneuert am: %s', 'recruiting-playbook' ),
                    date_i18n( 'j. F Y', strtotime( 'first day of next month' ) )
                ); ?>
            </p>
            
            <?php if ( $status['available'] < 20 ) : ?>
                <a href="<?php echo esc_url( admin_url( 'admin.php?page=rp-ai-upgrade' ) ); ?>" class="button">
                    <?php esc_html_e( 'Extra-Paket kaufen', 'recruiting-playbook' ); ?>
                </a>
            <?php endif; ?>
        </div>
        <?php
    }
    
    private function render_upgrade_prompt(): void {
        ?>
        <div class="rp-widget rp-ai-upgrade">
            <h3><?php esc_html_e( 'KI-Analysen', 'recruiting-playbook' ); ?></h3>
            
            <p><?php esc_html_e( 'Aktivieren Sie das AI-Addon fÃ¼r intelligentes Bewerber-Matching!', 'recruiting-playbook' ); ?></p>
            
            <ul class="rp-feature-list">
                <li>ğŸ¯ <?php esc_html_e( 'Job-Match: Passt der Bewerber?', 'recruiting-playbook' ); ?></li>
                <li>ğŸ” <?php esc_html_e( 'Job-Finder: Passende Stellen finden', 'recruiting-playbook' ); ?></li>
                <li>ğŸ“Š <?php esc_html_e( 'Chancen-Check: Einstellungschancen berechnen', 'recruiting-playbook' ); ?></li>
            </ul>
            
            <a href="<?php echo esc_url( rp_upgrade_url( 'AI_ADDON' ) ); ?>" class="button button-primary">
                <?php esc_html_e( 'AI-Addon aktivieren', 'recruiting-playbook' ); ?>
            </a>
        </div>
        <?php
    }
}
```

---

## DSGVO / Datenschutz

```php
<?php
// src/AI/Privacy/AIPrivacy.php

class AIPrivacy {
    
    /**
     * Datenschutz-Hinweise fÃ¼r AI-Feature
     */
    public static function get_consent_text(): string {
        return __( 
            'Ich willige ein, dass meine hochgeladenen Dokumente einmalig durch eine KI analysiert werden, 
            um meine Eignung fÃ¼r Stellenangebote zu prÃ¼fen. Die Dokumente werden nach der Analyse 
            nicht gespeichert und nicht an Dritte weitergegeben.', 
            'recruiting-playbook' 
        );
    }
    
    /**
     * Privacy Policy Text
     */
    public static function get_policy_text(): string {
        return __( '
## KI-gestÃ¼tzte Bewerber-Analyse

Unser Bewerbungsformular bietet optional eine KI-gestÃ¼tzte Analyse Ihrer Bewerbungsunterlagen.

### Was passiert bei der Analyse?
- Ihre hochgeladenen Dokumente (Lebenslauf, Zeugnisse) werden an den KI-Dienst Anthropic Claude Ã¼bermittelt
- Die KI analysiert Ihre Qualifikationen und vergleicht sie mit den Stellenanforderungen
- Sie erhalten eine EinschÃ¤tzung Ihrer Eignung

### Datenverarbeitung
- Die Dokumente werden nur fÃ¼r die einmalige Analyse verwendet
- Nach der Analyse werden die Dokumente sofort gelÃ¶scht
- Es werden keine personenbezogenen Daten dauerhaft bei Anthropic gespeichert
- Die Analyse erfolgt auf Basis Ihrer ausdrÃ¼cklichen Einwilligung

### Anthropic (Claude AI)
Anthropic ist der Anbieter des KI-Dienstes. Die Datenverarbeitung erfolgt gemÃ¤ÃŸ deren Datenschutzrichtlinien: https://www.anthropic.com/privacy

### Widerruf
Sie kÃ¶nnen die Analyse jederzeit ablehnen. Die Bewerbung ist auch ohne KI-Analyse mÃ¶glich.
', 'recruiting-playbook' );
    }
}

// Privacy Policy Hook
add_action( 'admin_init', function() {
    wp_add_privacy_policy_content(
        'Recruiting Playbook - KI-Analyse',
        \RecruitingPlaybook\AI\Privacy\AIPrivacy::get_policy_text()
    );
} );
```

---

## Zusammenfassung

| Feature | Beschreibung |
|---------|--------------|
| **Modus A: Job-Match** | Bewerber prÃ¼ft Eignung fÃ¼r konkrete Stelle |
| **Modus B: Job-Finder** | KI findet passende Stellen aus allen Angeboten |
| **Modus C: Chancen-Check** | Detaillierte Einstellungschancen-Analyse |
| **Auto-Fill** | Erkannte Daten werden ins Formular Ã¼bernommen |
| **Limit-System** | 100 Analysen/Monat, Extra-Pakete kaufbar |
| **DSGVO-konform** | Einwilligung, keine Speicherung, Transparenz |

---

*Letzte Aktualisierung: Januar 2025*
